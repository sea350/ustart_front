<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>ustart</title>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" href="/ustart_front/css/settings.css" />
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="/ustart_front/js/countries.js"></script>
	<script src="/ustart_front/js/majors.js"></script>
	<script src="/ustart_front/js/settings.js"></script>
    <script src="/ustart_front/js/jquery.cropit.js"></script>

    <style>
        .cropit-preview {
        background-color: #f8f8f8;
        background-size: cover;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-top: 7px;
        width: 250px;
        height: 250px;
      }

      .cropit-preview-image-container {
        cursor: move;
      }

      .image-size-label {
        margin-top: 10px;
      }

      input {
        display: block;
      }

      button[type="submit"] {
        margin-top: 10px;
      }

    </style>
</head>

<body>
	<div id="navBar-placeholder"></div>
	<div id="centering">
		<!-- Vertical content -->
		<div id="content" style="width: 96.9%; min-width: 96.9%;">
			<div id="settings-container" class="container">
				<h1>Settings</h1>
				<div class="panel-group" id="accordion">
					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#avatarcollapse">
							<h4 class="panel-title">Change Account Images and Status</h4>
						</div>
						<div id="avatarcollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<div class="form-group">

										<div class="row">
											<div class="col-sm-4">
                                                 <form id="img-form" action="http://ustart.today:5000/ImageUpload/" method="POST">
                                                      <div class="image-editor">
                                                        <input type="file" class="cropit-image-input">
                                                        <div class="cropit-preview"></div>
                                                        <div class="image-size-label">
                                                          Resize image
                                                        </div>
                                                        <input type="range" class="cropit-image-zoom-input">
                                                        <input type="hidden" name="image-data" class="hidden-image-data" />
                                                        <button type="submit">Submit</button>
                                                      </div>
                                                    </form>
                                                 <!-- <div id="result">
                                                      <code>$form.serialize() =</code>
                                                      <code id="result-data"></code>
                                                    </div>-->
                                                <script type="text/javascript">
                                                    function dataURItoBlob(dataURI) {
                                                        // convert base64 to raw binary data held in a string
                                                        // doesn't handle URLEncoded DataURIs
                                                        var byteString = atob(dataURI.split(',')[1]);

                                                        // separate out the mime component
                                                        var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

                                                        // write the bytes of the string to an ArrayBuffer
                                                        var ab = new ArrayBuffer(byteString.length);
                                                        var ia = new Uint8Array(ab);
                                                        for (var i = 0; i < byteString.length; i++) {
                                                            ia[i] = byteString.charCodeAt(i);
                                                        }
                                                        var blob = null;
                                                        // TypeError old chrome and FF
                                                        window.BlobBuilder = window.BlobBuilder || 
                                                                             window.WebKitBlobBuilder || 
                                                                             window.MozBlobBuilder || 
                                                                             window.MSBlobBuilder;
                                                        if(window.BlobBuilder){
                                                             var bb = new BlobBuilder();
                                                             bb.append(ab);
                                                             blob = bb.getBlob(mimeString);
                                                        }else{
                                                             blob = new Blob([ab], {type : mimeString});
                                                        }
                                                        return blob;
                                                        }
                                                      $(function() {
                                                        $('.image-editor').cropit();

                                                        $('#img-form').submit(function() {
                                                          // Move cropped image data to hidden input
                                                          var imageData = $('.image-editor').cropit('export');
                                                  
                                                          $('.hidden-image-data').val(imageData);


                                                          // Print HTTP request params
                                                          //var formValue = $(this).serialize();
                                                          //$('#result-data').text(formValue);

                                                          // Prevent the form from actually submitting
                                                          //return false;
                                                        });
                                                      });
                                                </script>
                                                </div>
											     
											<div class="col-sm-4">
												<label for="work_availability">Work Status</label>
												<br/>
												<label class="switch" style="float: none">
														<input id="work_availability" name="work_availability" type="checkbox" onchange="alterStatus()" checked>
														<span class="slider round"></span>
													</label>
												<br/>
												<span id="switchStatusMessage">Available</span>
											</div>
											<div class="col-sm-12">
												<hr/>
												<label for="lname">Banner Image</label>
												<br/>
												<img id="bannerImg" class="img-rounded img-responsive" src="https://pbs.twimg.com/profile_banners/783214/1500307683/1500x500"
												/>
												<input type="file" id="bannerUpload" accept="image/*" onchange="readURLBanner(this);" />
											</div>
										</div>
										<hr/>
										<input type="submit" class="btn btn-info" name="avatar_submit" value="Change Avatar" />
										<div class="save-message fade"></div>
								</div>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#desccollapse">
							<h4 class="panel-title">Change Contact and Description</h4>
						</div>
						<div id="desccollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<div class="alert alert-info alert-dismissable fade in">
									<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> These fields can be toggled for visibility.
									When set to invisibile, these fields will be disabled and will not be visible to others.
								</div>
								<div class="form-group">
									<form id="contactChange" action="http://ustart.today:5000/UpdateDescription/" method="POST">
										<div class="row">
											<div class="col-sm-3">
												<label for="pnumber">Phone Number</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="pnumberVis" checked><span class="slider round"></span></label>
												<input type="text" class="form-control" id="pnumber" name="pnumber" placeholder="Phone Number" required />
											</div>
											<div class="col-sm-3">
												<label for="gender_select">Gender</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="gender_selectVis" checked><span class="slider round"></span></label>
												<select id="gender_select" class="form-control" name="gender_select" required>
														<option disabled selected hidden>Select Gender</option>
														<option>Male</option>
														<option>Female</option>
														<option>Unspecified</option>
													</select>
											</div>
											<div class="col-sm-6">
												<label for="inputEmail">Email</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="inputEmailVis" checked><span class="slider round"></span></label>
												<input type="text" class="form-control" id="inputEmail" name="inputEmail" placeholder="Email Address" required />
											</div>
											<div class="col-sm-12">
												<label for="inputDesc">Description</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="inputDescVis" checked><span class="slider round"></span></label>
												<textarea type="text" class="form-control" id="inputDesc" name="inputDesc" rows="4" placeholder="Describe yourself."></textarea>
											</div>
										</div>
										<hr/>
										                                  <button type="submit">Submit</button>
									<!--	<input type="submit" class="btn btn-info" name="name_submit" value="Change Description" /> -->
										<div class="save-message fade"></div>
									</form>
								</div>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#namecollapse">
							<h4 class="panel-title">Change First and Last Name</h4>
						</div>
						<div id="namecollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<div class="alert alert-warning alert-dismissable fade in">
									<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> Names can only be changed twice a
									year. Otherwise, the user must contact our staff for revising their name.
								</div>
								<!-- Names -->
								<div class="form-group">
									<form id="nameChange" action="http://ustart.today:5000/changeName/" method="POST">
										<div class="row">
											<div class="col-sm-6">
												<label for="fname">First Name</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="fnameVis" checked><span class="slider round"></span></label>
												<input type="text" class="form-control" id="fname" name="fname" placeholder="First Name" required>
											</div>
											<div class="col-sm-6">
												<label for="lname">Last Name</label>
												<label class="switch usr-vis-opt"><input type="checkbox" name="lnameVis" checked><span class="slider round"></span></label>
												<input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name" required>
											</div>
										</div>
										<hr/>
										<input type="submit" class="btn btn-info" name="name_submit" value="Change Name" />
										<div class="save-message fade"></div>
									</form>
								</div>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#passcollapse">
							<h4 class="panel-title">Change Password</h4>
						</div>
						<div id="passcollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<form id="passChange" action="http://ustart.today:5000/changePass/" method="POST" >
									<div class="alert alert-info alert-dismissable fade in">
										<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> Password needs to verified. And then,
										the user is redirected to a password-change email-sent message.
									</div>
									<!-- Old Password -->
									<div class="input-group">
										<span class="input-group-addon">Old Password</span>
										<input type="password" class="form-control" id="oldpass" name="oldpass" placeholder="Enter the old password to change the current password"
										 required />
									</div>
									<br/>
									<!-- Confirm Password -->
									<div class="input-group">
										<span class="input-group-addon">Confirm Password</span>
										<input type="password" class="form-control" id="confirmpass" name="confirmpass" placeholder="Reconfirm the old password to change the current password"
										 required />
									</div>
									<hr/>
									<input type="submit" class="btn btn-info" name="pass_submit" value="Confirm Password Change" />
									<div class="save-message fade"></div>
								</form>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#loccollapse">
							<h4 class="panel-title">Change Location</h4>
						</div>
						<div id="loccollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<form id="locChange" action="http://ustart.today:5000/changeLoc/" method="POST">
									<!-- Country, State / City, Zip -->
									<div class="row">
										<div class="col-sm-4">
											<label for="country">Country</label>
											<label class="switch usr-vis-opt"><input type="checkbox" name="countryVis" checked><span class="slider round"></span></label>
											<select id="country" class="form-control" name="country" required></select>
										</div>
										<div class="col-sm-3">
											<label for="state">State</label>
											<label class="switch usr-vis-opt"><input type="checkbox" name="stateVis" checked><span class="slider round"></span></label>
											<select id="state" class="form-control" name="state" required></select>
										</div>
										<script language="javascript">
											populateCountries("country", "state");
										</script>
										<div class="col-sm-3">
											<label for="city">City</label>
											<label class="switch usr-vis-opt"><input type="checkbox" name="cityVis" checked><span class="slider round"></span></label>
											<input id="city" class="form-control" name="city" placeholder="City" required />
										</div>
										<div class="col-sm-2">
											<label for="zip">Zip</label>
											<label class="switch usr-vis-opt"><input type="checkbox" name="zipVis" checked><span class="slider round"></span></label>
											<input id="zip" class="form-control" name="zip" placeholder="Zip" required />
										</div>
									</div>
									<hr/>
									<input type="submit" class="btn btn-info" name="name_submit" value="Change Location" />
									<div class="save-message fade"></div>
								</form>
							</div>
						</div>
					</div>

					<div class="panel panel-default">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#educollapse">
							<h4 class="panel-title">Change Education</h4>
						</div>
						<div id="educollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<form id="eduChange" action="http://ustart.today:5000/changeEDU/" method="POST">
									<div>
										<label for="type_select">User Type</label>
										<select id="type_select" class="form-control" name="type_select">
												<option disabled selected hidden>Select User Type</option>
												<option>High School Student</option>
												<option>College Student</option>
												<option>Finished Education</option>
											</select>
									</div>
									<hr/>
									<!-- High School -->
									<div class="row">
										<div class="dropdown col-sm-7">
											<label for="schoolname">High School</label>
											<input type="text" name="schoolname" class="form-control" id="schoolname" placeholder="High School Name" />
										</div>
										<div class="dropdown col-sm-5">
											<label for="schoolname" style="visibility: hidden">?</label>
											<input type='text' placeholder="Graduation Date (MM/DD/YYYY)" class="form-control" id='highSchoolGradDate' name="highSchoolGradDate"
											 disabled value="06/15/2000" />
										</div>
										<script type="text/javascript">
											$('#highSchoolGradDate').datepicker({
												format: 'MM/DD/YYYY',
												changeYear: true,
												yearRange: "-100:+0"
											});
										</script>
									</div>
									<hr/>
									<!-- College -->
									<div class="row">
										<div class="dropdown col-sm-7">
											<label for="universityName">University/College</label>
											<input type="text" name="universityName" class="form-control" id="uni" placeholder="University/College Name" />
											<script type="text/javascript">
												$(document).ready(function () {
													$("#uni").autocomplete({
														source: function (request, response) {
															var results = $.ui.autocomplete.filter(universities, request.term);
															response(results.slice(0, 10));
														}
													});
												});
											</script>
										</div>
										<div class="dropdown col-sm-5">
											<label for="majors" style="visibility: hidden">?</label>
											<input type="text" id="maj" name="majors" class="form-control" placeholder="Major" />
											<script type="text/javascript">
												$(document).ready(function () {
													$("#maj").autocomplete({
														source: function (request, response) {
															var results = $.ui.autocomplete.filter(major, request.term);
															response(results.slice(0, 10));
														}
													});
												});
											</script>
										</div>
									</div>
									<br/>
									<!-- Grad Date -->
									<div class="row">
										<div class="dropdown col-sm-7">
											<select id="inYr" name="year" class="form-control">
													<option value='' disabled selected hidden>Select Class Level</option>
													<option value="Freshman">Freshman</option>
													<option value="Sophomore">Sophomore</option>
													<option value="Junior">Junior</option>
													<option value="Senior">Senior</option>
													<option value="Graduate">Graduate</option>
													<option value="PHD">PHD</option>
													<option value="Professor">Professor</option>
													<option value="Staff">Staff</option>
												</select>
										</div>
										<div class="dropdown col-sm-5">
											<input type='text' placeholder="Graduation Date (MM/DD/YYYY)" class="form-control" id='uniGradDate' name="uniGradDate" />
										</div>
										<script type="text/javascript">
												$('#uniGradDate').datepicker({
													format: 'MM/DD/YYYY',
													changeYear: true,
													yearRange: "-100:+0"
												});
										</script>
									</div>
									<hr/>
									<input type="submit" class="btn btn-info" name="name_submit" value="Change Education" />
									<div class="save-message fade"></div>
								</form>
							</div>
						</div>
					</div>

					<div class="panel panel-warning">
						<div class="panel-heading">
							<h4 class="panel-title">
								<a href="blocked_users.html">Manage Blocked Users</a>
							</h4>
						</div>
					</div>

					<div class="panel panel-danger">
						<div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#deleteAccountCollapse">
							<h4 class="panel-title">Delete Account</h4>
						</div>
						<div id="deleteAccountCollapse" class="panel-collapse collapse">
							<div class="panel-body">
								<div class="alert alert-danger alert-dismissable fade in">
									<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a> The account will be no longer accessible.
									However, the account won't be deleted on the server.
								</div>
								<form id="deleteAccountForm" action="http://ustart.today:5000/deleteAccount/" method="POST">
									<input type="submit" class="btn btn-danger" name="name_submit" value="Delete Account" />
								</form>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="avatarCropperModal" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Crop avatar</h4>
				</div>
				<div class="modal-body">
					<iframe src="swagCrop/index.html" id="cropperiframe"> </iframe>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div id="footer-placeholder"></div>
</body>

</html>