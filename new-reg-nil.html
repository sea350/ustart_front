<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>UStart Registration</title>
    <link rel="stylesheet" href="/ustart_front/css/register.css">
    <script type="text/javascript" src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
    <script type="text/javascript" src="/ustart_front/bower_components/moment/min/moment.min.js"></script>
    <script type="text/javascript" src='https://www.google.com/recaptcha/api.js'></script>
    <script type="text/javascript" src="/ustart_front/js/zxcvbn.js"></script>
    <script type="text/javascript" src="/ustart_front/js/layout.js"></script>
    <script type="text/javascript" src="/ustart_front/js/majors.js"></script>
    <script type="text/javascript" src="/ustart_front/js/countries.js"></script>
    <script type="text/javascript" src="/ustart_front/js/reg-check.js"></script>
    <!-- <link rel="stylesheet" href="/ustart_front/resources/demos/style.css"> -->
</head>


<body>
    <div id="centering" style="top: 6em;">
        <div id="content">
            <div class="container">
                <h2 style="padding:0;">Sign up for your free month! </h2>
                {{ if .ErrorOutput }}
                <div id="dup-email-alert" class="alert alert-danger alert-dismissible fade in" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <strong>Oops! Here's an error: {{.ErrorOutput}}</strong>
                </div>
                {{end}}
               <form class="form-signup" id="form1" action="/welcome/" method="post">
                    <!-- Name -->   
                    <div class="row">
                        <div class="dropdown col-sm-6">
                            <label for="fName" class="sr-only">First Name</label>
                            <input type="text" id="fName" name="firstName" class="form-control" placeholder="First Name" required  autocomplete="given-name">
                        </div>
                        <div class="dropdown col-sm-6">
                            <label for="lName" class="sr-only">Last Name</label>
                            <input type="text" id="lName" name="lastName" class="form-control" placeholder="Last Name" required  autocomplete="family-name">
                        </div>
                    </div>
                    <!-- Username/Email -->
                    <div class="row">
                        <div class="dropdown col-sm-6">
                            <label for="uName" class="sr-only">Username</label>
                            <input type="text" id="uName" name="username" class="form-control" placeholder="Username" autocomplete="username" pattern="[a-zA-Z0-9][a-zA-Z0-9_]+[a-zA-Z0-9]" required />
                            <p id="uDup" style="color:red;">Username is already being used. Try another username.</p>
                        </div>
                        <div class="dropdown col-sm-6">
                            <label for="inEmail" class="sr-only">Email address</label>
                            <input type="email" id="inputEmail" name="inputEmail" class="form-control" placeholder="Email address" onblur="validateEmail()" required   autocomplete="email">
                            <p id="notedu" style="color: red;">You need an '.edu' email.</p>
                        </div>
                    </div>
                    <!-- Password -->
                    <div class="row">
                        <div class="dropdown col-sm-6">
                            <label for="inPassword" class="sr-only">Password</label>
                            <input type="password" id="inputPassword" name="inputPassword" class="form-control" placeholder="Password" required  autocomplete="new-password">
                            <div id="meter-cont" class="progress password-progress" style=" margin-top: 5px; margin-bottom: 5px;">
                                <div id="meter" class="progress-bar" role="progressbar" style="width: 0;"></div>
                            </div>
                            <div id="bad-pass" style="display: none">
                                <p style="color: red;">Password not strong enough.</p>
                            </div>
                            <div id="left-empty" style="display: none">
                                <p style="color: red;">You must enter a password.</p>
                            </div>
                            <script type="text/javascript">
                            // Password strength script

                            var pass = document.getElementById('inputPassword');
                            var mcont = document.getElementById('meter-cont');
                            var meter = document.getElementById('meter');
                            var empty = document.getElementById('left-empty');
                            var bad = document.getElementById('bad-pass');
                            meter.style.display = "none";
                            empty.style.display = "none";
                            bad.style.display = "none";
                            mcont.style.display = "none";
                            pass.addEventListener('input', function() {

                                var val = pass.value;

                                meter.style.display = "block";
                                if (val == '') {
                                    empty.style.display = "block";
                                    bad.style.display = "none";
                                    meter.style.display = "none";
                                    mcont.style.display = "none";

                                }
                                // pass into function to measure strength
                                var result = zxcvbn(val);

                                // Password progress bar
                                var $bar = $('#meter');

                                if (result.score == 0) {
                                    if (val == '') {
                                        empty.style.display = "block";
                                        bad.style.display = "none";
                                        meter.style.display = "none";
                                        mcont.style.display = "block";

                                    } else {
                                        $bar.attr('class', 'progress-bar progress-bar-danger').css('width', '0%');
                                        bad.style.display = "block";
                                        empty.style.display = "none";
                                        mcont.style.display = "block";
                                    }

                                } else if (result.score == 1) {
                                    $bar.attr('class', 'progress-bar progress-bar-danger').css('width', '25%');
                                    bad.style.display = "block";
                                    empty.style.display = "none";

                                } else if (result.score == 2) {

                                    $bar.attr('class', 'progress-bar progress-bar-danger').css('width', '50%');
                                    bad.style.display = "block";
                                    empty.style.display = "none";
                                } else if (result.score == 3) {

                                    $bar.attr('class', 'progress-bar progress-bar-warning').css('width', '75%');
                                    bad.style.display = "none";
                                    empty.style.display = "none";
                                } else { // score == 4
                                    $bar.attr('class', 'progress-bar progress-bar-success').css('width', '100%');
                                    bad.style.display = "none";
                                    empty.style.display = "none";
                                }
                            });
                            </script>
                        </div>
                        <div class="dropdown col-sm-6">
                            <label for="confirmPass" class="sr-only">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" placeholder="Confirm Password" required>
                            <p id="pwNoMatch" style="color:red;">Sorry, passwords do not match.</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="dropdown col-sm-4">
                            <select id="country" name="country" class="form-control" autocomplete="country-name"></select>
                        </div>
                        <div class="dropdown col-sm-3">
                            <select name="state" id="state" class="form-control" autocomplete="state"></select>
                        </div>
                        <script language="javascript">
                            populateCountries("country", "state");
                        </script>
                        <div class="dropdown col-sm-3">
                            <input id="city" name="city" class="form-control" placeholder="City" autocomplete="city">
                        </div>
                        <div class="dropdown col-sm-2">
                            <input id="zip" name="zip" class="form-control" placeholder="Zip" autocomplete="postal-code">
                        </div>
                    </div>
                    <!-- School / Majors -->
                    <div class="row">
                        <div class="dropdown col-sm-6">
                            <input name="universityName" class="form-control" id="uni" placeholder="University/College" required >
                            <script type="text/javascript">
                            $(document).ready(function() {
                                $("#uni").autocomplete({
                                    source: function(request, response) {
                                        var results = $.ui.autocomplete.filter(universities, request.term);
                                        response(results.slice(0, 10));
                                    }
                                });
                            });
                            </script>
                        </div>
                        <div class="dropdown col-sm-6">
                            <input type="text" id="maj" name="majors" class="form-control" placeholder="Major" / required >
                            <script type="text/javascript">
                            $(document).ready(function() {

                                $("#maj").autocomplete({
                                    source: function(request, response) {
                                        var results = $.ui.autocomplete.filter(major, request.term);
                                        response(results.slice(0, 10));
                                    }
                                });
                            });
                            </script>
                        </div>
                    </div>
                    <!-- Year / DOB -->
                    <div class="row">
                        <div class="dropdown col-sm-6">
                            <select id="inYr" name="year" class="form-control">
                                <option value=''>Select Year</option>
                                <option value="Freshman">Freshman</option>
                                <option value="Sophomore">Sophomore</option>
                                <option value="Junior">Junior</option>
                                <option value="Senior">Senior</option>
                                <option value="Graduate">Graduate</option>
                                <option value="Post-Graduate">Post-Graduate</option>
                            </select>
                        </div>
                        <div class="dropdown col-sm-6">
                            <input id="birthday" type="date" placeholder="Date of Birth (YYYY-MM-DD)" class="form-control" name="dob" required />
                        </div>
                        <script type="text/javascript">
                            /*$('#datetimepicker4').datepicker({
                                format: 'YYYY-MM-DD',
                                changeMonth: true,
                                changeYear: true,
                                yearRange: "-120:-10"
                            });*/
                        </script>
                    </div>
                    <br>
                    <!-- captcha check -->
                    <div style="margin-left:auto; margin-right:auto; width: 305px;">
                        <div class="g-recaptcha" data-callback="recaptchaCallback" data-sitekey="6Lc-aS4UAAAAAMwN6widYlOeos0ilDifkmf21rQZ"></div>
                    </div>
                    <br>
                    <div id="termsReader">
                        <input id="termsRead" type="checkbox" required />
                        <label for="termsRead">I agree that I have read the <a href="U-Start Terms and Conditions Draft.htm" target="_blank">terms and conditions</a>.</label>
                    </div>
                    <button type="submit" class="btn btn-lg btn-primary btn-block" value="Submit" name="send" id="finished" disabled>Continue</button>
                    <script>
                        function recaptchaCallback() {
                            $('#finished').removeAttr('disabled');
                        }
                        $("#form1").submit(function() {
                            
                        });
                    </script>
                    <br>
                    <br>
                    <br>
                </form>
            </div>
        </div>
    </div>
    <footer id="foot"></footer>
</body>

</html>